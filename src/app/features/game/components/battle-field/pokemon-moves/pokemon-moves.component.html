<div class="moves-container">
  <div class="moves-grid">
    <div
      *ngFor="let PokemonMove of PokemonMoves"
      class="move-wrapper"
      (mouseenter)="onMouseEnter(PokemonMove)"
      (mouseleave)="onMouseLeave(PokemonMove)"
    >
      <button
        class="move-button"
        [class.move-disabled]="DisabledMoves.includes(PokemonMove.nameFr)"
        [style.border-color]="!DisabledMoves.includes(PokemonMove.nameFr) ? typeConfig[PokemonMove.type.toLowerCase()].colorBorder : 'rgba(115, 115, 115, 0.3)'"
        [style.background]="!DisabledMoves.includes(PokemonMove.nameFr) && PokemonMove.hover ? typeConfig[PokemonMove.type.toLowerCase()].colorHover : (!DisabledMoves.includes(PokemonMove.nameFr) ? typeConfig[PokemonMove.type.toLowerCase()].color : 'rgba(64, 64, 64, 0.2)')"
        (click)="!DisabledMoves.includes(PokemonMove.nameFr) && useMove(PokemonMove)"
      >
        <!-- Gradient au hover -->
        <div
          class="move-gradient"
          [style.background]="'linear-gradient(135deg, ' + typeConfig[PokemonMove.type.toLowerCase()].color + ', transparent)'"
          [style.opacity]="PokemonMove.hover && !DisabledMoves.includes(PokemonMove.nameFr) ? 1 : 0"
        ></div>

        <div class="move-content">
          <div class="move-header">
            <span
              class="move-name"
              [style.color]="!DisabledMoves.includes(PokemonMove.nameFr) && PokemonMove.hover ? typeConfig[PokemonMove.type.toLowerCase()].colorText : (!DisabledMoves.includes(PokemonMove.nameFr) ? '#d4d4d4' : '#737373')"
            >
              {{ PokemonMove.nameFr }}
            </span>
            <span
              class="move-icon"
              [style.transform]="PokemonMove.hover && !DisabledMoves.includes(PokemonMove.nameFr) ? 'scale(1.1)' : 'scale(1)'"
              [style.opacity]="DisabledMoves.includes(PokemonMove.nameFr) ? 0.3 : 0.7"
            >
              {{ getTypeIcon(PokemonMove.type) }}
            </span>
          </div>

          <div class="move-footer">
            <span
              class="move-pp"
              [style.color]="!DisabledMoves.includes(PokemonMove.nameFr) && PokemonMove.hover ? typeConfig[PokemonMove.type.toLowerCase()].colorText : '#737373'"
            >
              {{ PokemonMove.pp }} / {{ PokemonMove.pp }}
            </span>
          </div>
        </div>
      </button>

      <!-- Info box au hover -->
      <div *ngIf="PokemonMove.isHovered" class="info-box">
        <h4 class="info-title">{{ PokemonMove.nameFr }}</h4>
        <p class="info-description">{{ PokemonMove.flavorText }}</p>
        <div class="info-stats">
          <div class="info-stat">
            <span class="info-stat-label">Type :</span>
            <span class="info-stat-value">{{ PokemonMove.damageType }}</span>
          </div>
          <div class="info-stat">
            <span class="info-stat-label">Puissance :</span>
            <span class="info-stat-value">{{ PokemonMove.power || '-' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="otherActions">
    <div class="otherAction" (click)="openReplacePokemon()">
      <img class="otherAction swap" src="assets/items-sprites/swap.png"/>
    </div>
    <div class="otherAction" (mouseenter)="bagHovered=true" (mouseleave)="bagHovered=false" (click)="openBagDialog()">
      <img src="assets/items-sprites/Sac.png" *ngIf="!bagHovered">
      <img src="assets/items-sprites/Sac_Open.png" *ngIf="bagHovered">
    </div>
  </div>
</div>
